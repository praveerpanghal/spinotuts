!function(){"use strict";function t(t){var e=this;e.stc=t}function e(t){var e=this;e.stc=t}function n(t){var e=this;e.stc=t}function o(o,i){var r=this;r.$tabsContainer=o,r.$timeout=i,r.movableContainerLeftPos=0,r.scrollArrowsVisible=!0,r.scrollToTabEdge=!1,r.scrollMovement=new n(r),r.eventHandlers=new t(r),r.elementsHandler=new e(r)}function i(t,e){function n(t){return e.trustAsHtml(t)}return{restrict:"E",template:l,transclude:!1,replace:!0,scope:{tabs:"@",watchTabs:"=",propPaneId:"@",propTitle:"@",propActive:"@",propDisabled:"@",localTabClick:"&tabClick"},link:function(e,i,r){var a=new o(i,t),s=r.scrollToTabEdge&&"true"===r.scrollToTabEdge.toLowerCase();return e.tabsArr=e.$eval(e.tabs),e.propPaneId=e.propPaneId||"paneId",e.propTitle=e.propTitle||"title",e.propActive=e.propActive||"active",e.propDisabled=e.propDisabled||"disabled",e.sanitize=n,i.on("click.scrollingTabs",".nav-tabs > li",function(t){var n=$(this).data();e.localTabClick({$event:t,$index:n.index,tab:n.tab})}),r.watchTabs?void e.$watch("watchTabs",function(n,o){var r,l;e.tabsArr=e.$eval(e.tabs),n.length&&n[n.length-1].active?t(function(){i.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0):(r=i.find(".nav-tabs > li.active"),r.length&&(l=r.data("index"),e.tabsArr.some(function(t){if(t[e.propActive])return t[e.propActive]=!1,!0}),e.tabsArr[l][e.propActive]=!0)),a.initTabs({isWrapperDirective:!1,isWatchingTabs:!0,scrollToTabEdge:s})},!0):void a.initTabs({isWrapperDirective:!1,scrollToTabEdge:s})}}}function r(t){return{restrict:"A",template:c,transclude:!0,replace:!0,link:function(e,n,i){function r(t){s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,isWatchingTabs:!0,scrollToTabEdge:b,isWatchingDom:t&&t.isWatchingDom})}function a(){function o(){return i=s.find("li.active").index(),i!==a&&(a=i,r({isWatchingDom:!0})),!1}var i,a,s=n.find("ul.nav-tabs");s.length&&(e.$watch(function(){return s[0].childNodes.length},function(t,e){t!==e&&r({isWatchingDom:!0})}),e.$watch(function(){return t(o,0,!1),s.find("li.active").index()},angular.noop))}var s=new o(n,t),l=n.find("uib-tabset").length>0,c=l||n.find("tabset, .scrtabs-tabs-movable-container .ng-isolate-scope > ul.nav").length>0,b=i.scrollToTabEdge&&"true"===i.scrollToTabEdge.toLowerCase(),d={hasTabContentOutsideMovableContainer:!0};return angular.extend(e,{scrtc:d}),c||(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),l||i.watchTabs?void((!(l||i.watchTabs&&"true"===i.watchTabs.toLowerCase())||(c&&(s.removeTranscludedTabContentOutsideMovableContainer(),d.hasTabContentOutsideMovableContainer=!1),r(),t(a,10),l&&i.watchTabs&&"true"!==i.watchTabs.toLowerCase()))&&e.$watch(i.watchTabs,function(e,o){c?l&&e.length&&e[e.length-1].active&&t(function(){n.find(".scrtabs-tabs-movable-container ul.nav-tabs > li:last").find('a[role="tab"],a.nav-link').click()},0):e.length&&e[e.length-1].active&&t(function(){n.find("ul.nav-tabs > li:last").removeClass("active").find('a[role="tab"]').click()},0),r()},!0)):void s.initTabs({isWrapperDirective:!0,isWrappingAngularUITabset:c,scrollToTabEdge:b})}}}var a={CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL:50,SCROLL_OFFSET_FRACTION:6,DATA_KEY_IS_MOUSEDOWN:"ismousedown"},s=angular.module("mj.scrollingTabs",[]),l=['<div class="scrtabs-tab-container">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container">','       <ul class="nav nav-tabs" role="tablist">',"         <li ng-class=\"{ 'active': tab[propActive || 'active'], ","                         'disabled': tab[propDisabled || 'disabled'] }\" ",'             data-tab="{{tab}}" data-index="{{$index}}" ng-repeat="tab in tabsArr">',"           <a ng-href=\"{{'#' + tab[propPaneId || 'paneId']}}\" role=\"tab\"","                data-toggle=\"{{tab[propDisabled || 'disabled'] ? '' : 'tab'}}\" ","                ng-bind-html=\"sanitize(tab[propTitle || 'title']);\">","           </a>","         </li>","       </ul>","     </div>"," </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join(""),c=['<div class="scrtabs-tab-wrapper-container" ng-class="{ \'force-height\': !scrtc.hasTabContentOutsideMovableContainer }">',' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-left"><span class="glyphicon glyphicon-chevron-left"></span></div>','   <div class="scrtabs-tabs-fixed-container">','     <div class="scrtabs-tabs-movable-container" ng-transclude></div>',"   </div>",' <div class="scrtabs-tab-scroll-arrow scrtabs-js-tab-scroll-arrow-right"><span class="glyphicon glyphicon-chevron-right"></span></div>',"</div>"].join("");!function(t,e){var n=function(t,e,n){var o;return function(){function i(){n||t.apply(r,a),o=null}var r=this,a=arguments;o?clearTimeout(o):n&&t.apply(r,a),o=setTimeout(i,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize.scrtabs",n(t)):this.trigger(e)}}(jQuery,"smartresize"),function(t){t.handleClickOnLeftScrollArrow=function(t){var e=this,n=e.stc;n.scrollMovement.incrementScrollLeft()},t.handleClickOnRightScrollArrow=function(t){var e=this,n=e.stc,o=n.scrollMovement;o.incrementScrollRight(o.getMinPos())},t.handleMousedownOnLeftScrollArrow=function(t){var e=this,n=e.stc;n.scrollMovement.startScrollLeft()},t.handleMousedownOnRightScrollArrow=function(t){var e=this,n=e.stc;n.scrollMovement.startScrollRight()},t.handleMouseupOnLeftScrollArrow=function(t){var e=this,n=e.stc;n.scrollMovement.stopScrollLeft()},t.handleMouseupOnRightScrollArrow=function(t){var e=this,n=e.stc;n.scrollMovement.stopScrollRight()},t.handleWindowResize=function(t){var e=this,n=e.stc,o=n.$win.width();return o!==n.winWidth&&(n.winWidth=o,void n.elementsHandler.refreshAllElementSizes())}}(t.prototype),function(t){t.initElements=function(t){var e=this,n=e.stc;n.$tabsContainer;e.setElementReferences(),t.isWrappingAngularUITabset&&e.moveTabContentOutsideScrollContainer(t),e.setEventListeners()},t.moveTabContentOutsideScrollContainer=function(t){var e,n,o=this,i=o.stc,r=i.$tabsContainer,a="scrtabs-tab-content-clone",s=r.find(".scrtabs-tabs-movable-container .tab-content");return t.isWatchingTabs?(n=s.clone().addClass(a),e=r.find("."+a),void(e.length?e.replaceWith(n):r.append(n))):void s.show().appendTo(r)},t.refreshAllElementSizes=function(){var t,e=this,n=e.stc,o=n.scrollMovement,i=n.scrollArrowsVisible,r={didScrollToActiveTab:!1};return e.setElementWidths(),e.setScrollArrowVisibility(),n.scrollArrowsVisible&&e.setFixedContainerWidthForJustVisibleScrollArrows(),(n.scrollArrowsVisible||i)&&(n.scrollArrowsVisible?(t=o.getMinPos(),n.movableContainerLeftPos<t?o.incrementScrollRight(t):(o.scrollToActiveTab({isOnWindowResize:!0}),r.didScrollToActiveTab=!0)):(n.movableContainerLeftPos=0,o.slideMovableContainerToLeftPos())),r},t.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.stc,n=e.$tabsContainer;n.find(".scrtabs-tab-content-outside-movable-container").remove()},t.setElementReferences=function(){var t=this,e=t.stc,n=e.$tabsContainer;e.isNavPills=!1,e.$fixedContainer=n.find(".scrtabs-tabs-fixed-container"),e.$movableContainer=n.find(".scrtabs-tabs-movable-container"),e.$tabsUl=e.$movableContainer.find(".nav-tabs"),e.$tabsUl.length||(e.$tabsUl=e.$movableContainer.find(".nav-pills"),e.$tabsUl.length&&(e.isNavPills=!0)),e.$tabsLiCollection=e.$tabsUl.find("> li"),e.$leftScrollArrow=n.find(".scrtabs-js-tab-scroll-arrow-left"),e.$rightScrollArrow=n.find(".scrtabs-js-tab-scroll-arrow-right"),e.$scrollArrows=e.$leftScrollArrow.add(e.$rightScrollArrow),e.$win=$(window)},t.setElementWidths=function(){var t=this,e=t.stc;e.containerWidth=e.$tabsContainer.outerWidth(),e.winWidth=e.$win.width(),e.scrollArrowsCombinedWidth=e.$leftScrollArrow.outerWidth()+e.$rightScrollArrow.outerWidth(),t.setFixedContainerWidth(),t.setMovableContainerWidth()},t.setEventListeners=function(){var t=this,e=t.stc,n=e.eventHandlers;e.$leftScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(t){n.handleMousedownOnLeftScrollArrow.call(n,t)},"mouseup.scrtabs":function(t){n.handleMouseupOnLeftScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnLeftScrollArrow.call(n,t)}}),e.$rightScrollArrow.off(".scrtabs").on({"mousedown.scrtabs":function(t){n.handleMousedownOnRightScrollArrow.call(n,t)},"mouseup.scrtabs":function(t){n.handleMouseupOnRightScrollArrow.call(n,t)},"click.scrtabs":function(t){n.handleClickOnRightScrollArrow.call(n,t)}}),e.$win.smartresize(function(t){n.handleWindowResize.call(n,t)})},t.setFixedContainerWidth=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth=e.$tabsContainer.outerWidth())},t.setFixedContainerWidthForJustHiddenScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth)},t.setFixedContainerWidthForJustVisibleScrollArrows=function(){var t=this,e=t.stc;e.$fixedContainer.width(e.fixedContainerWidth-e.scrollArrowsCombinedWidth)},t.setMovableContainerWidth=function(){var t=this,e=t.stc,n=e.$tabsUl.find("li"),o=e.$fixedContainer.height(),i=10;for(e.movableContainerWidth=0,n.length&&(n.each(function(){var t=$(this),n=0;e.isNavPills&&(n=parseInt(t.css("margin-left"),10)+parseInt(t.css("margin-right"),10)),e.movableContainerWidth+=t.outerWidth()+n}),e.movableContainerWidth+=1,e.movableContainerWidth<e.fixedContainerWidth&&(e.movableContainerWidth=e.fixedContainerWidth)),e.$movableContainer.width(e.movableContainerWidth);e.$movableContainer.height()>o&&i--;)e.$movableContainer.width(e.movableContainerWidth+=1)},t.setScrollArrowVisibility=function(){var t=this,e=t.stc,n=e.movableContainerWidth>e.fixedContainerWidth;n&&!e.scrollArrowsVisible?(e.$scrollArrows.show(),e.scrollArrowsVisible=!0,t.setFixedContainerWidthForJustVisibleScrollArrows()):!n&&e.scrollArrowsVisible&&(e.$scrollArrows.hide(),e.scrollArrowsVisible=!1,t.setFixedContainerWidthForJustHiddenScrollArrows())}}(e.prototype),function(t){t.continueScrollLeft=function(){var t=this,e=t.stc;e.$timeout(function(){e.$leftScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN)&&e.movableContainerLeftPos<0&&(t.incrementScrollLeft()||t.continueScrollLeft())},a.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},t.continueScrollRight=function(t){var e=this,n=e.stc;n.$timeout(function(){n.$rightScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN)&&n.movableContainerLeftPos>t&&(e.incrementScrollRight(t)||e.continueScrollRight(t))},a.CONTINUOUS_SCROLLING_TIMEOUT_INTERVAL)},t.decrementMovableContainerLeftPos=function(t){var e=this,n=e.stc;n.movableContainerLeftPos-=n.fixedContainerWidth/a.SCROLL_OFFSET_FRACTION,n.movableContainerLeftPos<t?n.movableContainerLeftPos=t:n.scrollToTabEdge&&(e.setMovableContainerLeftPosToTabEdge("right"),n.movableContainerLeftPos<t&&(n.movableContainerLeftPos=t))},t.getMinPos=function(){var t=this,e=t.stc;return e.scrollArrowsVisible?e.fixedContainerWidth-e.movableContainerWidth-e.scrollArrowsCombinedWidth:0},t.getMovableContainerCssLeftVal=function(){var t=this,e=t.stc;return 0===e.movableContainerLeftPos?"0":e.movableContainerLeftPos+"px"},t.incrementScrollLeft=function(){var t=this,e=t.stc;return e.movableContainerLeftPos+=e.fixedContainerWidth/a.SCROLL_OFFSET_FRACTION,e.movableContainerLeftPos>0?e.movableContainerLeftPos=0:e.scrollToTabEdge&&(t.setMovableContainerLeftPosToTabEdge("left"),e.movableContainerLeftPos>0&&(e.movableContainerLeftPos=0)),t.slideMovableContainerToLeftPos(),0===e.movableContainerLeftPos},t.incrementScrollRight=function(t){var e=this,n=e.stc;return e.decrementMovableContainerLeftPos(t),e.slideMovableContainerToLeftPos(),n.movableContainerLeftPos===t},t.scrollToActiveTab=function(t){var e,n,o,i,r,a=this,s=a.stc;s.scrollArrowsVisible&&(e=s.$tabsUl.find("li.active"),e.length&&(n=e.outerWidth(),o=e.offset().left,i=s.$rightScrollArrow.offset().left,r=o+n-i,r>0&&(s.movableContainerLeftPos=t.isOnWindowResize||t.isOnTabsRefresh?s.movableContainerLeftPos-r:-r,a.slideMovableContainerToLeftPos())))},t.setMovableContainerLeftPosToTabEdge=function(t){var e=this,n=e.stc,o=-n.movableContainerLeftPos,i=0;n.$tabsLiCollection.each(function(e){var r=$(this).width();if(i+=r,i>o)return n.movableContainerLeftPos="left"===t?-(i-r):-i,!1})},t.slideMovableContainerToLeftPos=function(){var t,e=this,n=e.stc;n.movableContainerLeftPos=n.movableContainerLeftPos/1,t=e.getMovableContainerCssLeftVal(),n.$movableContainer.stop().animate({left:t},"slow",function(){var t=e.getMinPos();n.movableContainerLeftPos<t&&(e.decrementMovableContainerLeftPos(t),n.$movableContainer.stop().animate({left:e.getMovableContainerCssLeftVal()},"fast"))})},t.startScrollLeft=function(){var t=this,e=t.stc;e.$leftScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollLeft()},t.startScrollRight=function(){var t=this,e=t.stc;e.$rightScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN,!0),t.continueScrollRight(t.getMinPos())},t.stopScrollLeft=function(){var t=this,e=t.stc;e.$leftScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN,!1)},t.stopScrollRight=function(){var t=this,e=t.stc;e.$rightScrollArrow.data(a.DATA_KEY_IS_MOUSEDOWN,!1)}}(n.prototype),function(t){t.initTabs=function(t){var e=this,n=e.elementsHandler,o=e.scrollMovement;t.scrollToTabEdge&&(e.scrollToTabEdge=!0),e.$timeout(function(){var e;n.initElements(t),e=n.refreshAllElementSizes(),e.didScrollToActiveTab||o.scrollToActiveTab({isOnTabsRefresh:t.isWatchingTabs})},100)},t.removeTranscludedTabContentOutsideMovableContainer=function(){var t=this,e=t.elementsHandler;e.removeTranscludedTabContentOutsideMovableContainer()}}(o.prototype),i.$inject=["$timeout","$sce"],r.$inject=["$timeout"],s.directive("scrollingTabs",i),s.directive("scrollingTabsWrapper",r)}();