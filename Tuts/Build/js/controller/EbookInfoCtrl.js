app.controller("EbookInfoCtrl",["$route","$localStorage","myAppURLs","JsonDataService","$location","$sanitize","$sce","httpCall",function(t,o,e,n,a,i,r,l){var s=this;s.parent=a.path().split("/")[1],s.categoryname=a.path().split("/")[2],s.articleid=a.path().split("/")[3],s.ebooktitle=a.path().split("/")[4];var c=e.GetEbookChapterList,u=n.GetJsonInfo(t.current.templateUrl);l.GetMethod(u).then(function(t){s.JsonVals=t},function(t){console.log(t.statusText),$log.info(t)});var p={category_id:s.articleid,chapter_id:0};l.PostMethod(c,p).then(function(t){s.Ebooks=t,s.Ebooks=s.Ebooks.filter(function(t){return"Y"==t.chapter_is_approved&&void 0!==t.chapter_description}),s.EbookInfo=s.Ebooks.filter(function(t){return t.alias_url==s.ebooktitle}),s.EbookInfo=s.EbookInfo[0],s.Chindex=s.Ebooks.length-s.Ebooks.map(function(t){return t.alias_url}).indexOf(s.ebooktitle)-1},function(t){console.log(t.statusText),$log.info(t)}),s.to_trusted=function(t){return r.trustAsHtml(t)},s.pre=function(t){var o=s.Ebooks.map(function(t){return t.alias_url}).indexOf(t),e="/"+s.parent+"/"+s.categoryname+"/"+s.articleid+"/"+s.Ebooks[o+1].alias_url;a.path(e)},s.next=function(t){var o=s.Ebooks.map(function(t){return t.alias_url}).indexOf(t),e="/"+s.parent+"/"+s.categoryname+"/"+s.articleid+"/"+s.Ebooks[o-1].alias_url;a.path(e)}}]);