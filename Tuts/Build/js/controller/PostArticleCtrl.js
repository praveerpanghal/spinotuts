app.controller("PostArticleCtrl",["CatService","$filter","myAppURLs","$route","JsonDataService","EncodeService","httpCall","$log","$rootScope",function(e,t,i,s,c,l,r,o,a){var n=this,u=c.GetJsonInfo(s.current.templateUrl);r.GetMethod(u).then(function(e){n.JsonVals=e},function(e){console.log(e.statusText),o.info(e)}),n.menu=[["bold","italic","underline","strikethrough","subscript","superscript"],["format-block"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragraph"],["css-class"]],n.BtnShow=!0,n.cLists=JSON.parse(e.getVal());var _=JSON.parse(l.encodelogval(sessionStorage.UserInfo));n.urid=_.UserRightsId,n.reload=function(){n.article=[],n.isClicked=!1,n.showmee=!1,n.successmessage="",n.article.category_id="",n.article.article_name="",n.article.alias_url="",n.article.article_short_desc="",n.article.article_title="",n.article.article_title_short_desc="",n.article.example_name="",n.article.code_desc="",n.article.example_desc="",n.article.article_title_id="",n.article.flag=""},n.selectedItemChanged=function(e){function t(e,t){return e.filter(function(e){return Object.keys(t).every(function(i){return e[i]==t[i]})})}var i=t(JSON.parse(JSON.stringify(n.bookslists)),{category_id:e});i.length>0?n.ebookpostch.sequence_no=i[0].sequence_no+1:n.ebookpostch.sequence_no=1},n.successmessage="",n.submit_btn=!0,n.selection=[],n.MultipleSelection=function(e){var t=n.selection.indexOf(e);"0"==t&&(n.buttonnavi=!0),t>-1?n.selection.splice(t,1):(n.selection.push(e),n.buttonnavi=!1)},n.getArticles=function(){var e=i.GetArticlesInformation;r.GetMethod(e).then(function(e){n.particles=e.GetArticlesInformationResult,n.selection=[],n.buttonnavi=!0,n.successmessage=""},function(e){console.log(e.statusText),o.info(e)})},n.getArticles(),n.update_iq_info=function(e,t){$(".seqnum").prop("disabled",!1),n.isClicked=!1,n.showmee=!0,n.BtnShow=!1,n.successmessage="",n.article=angular.copy(e)},n.copyText=function(e){n.article.alias_url=t("lowercase")(e).replace(/ +(?=)/g,"-")},n.changestatus=function(e){var t=[];t.article_name="",t.alias_url="",t.article_short_desc="",t.article_title="",t.article_title_short_desc="",t.example_name="",t.code_desc="",t.example_desc="",t.article_title_id=n.selection.toString(),t.flag=e,t.category_id="",n.Articles(t,e)},n.Articles=function(e,t){var s=i.PostArticle,c=i.ModifyArticles,l=new Object;l.UserId=_.UserId,l.article_name=e.article_name,l.alias_url=e.alias_url,l.article_short_desc=e.article_short_desc,l.article_title=e.article_title,l.article_title_short_desc=e.article_title_short_desc,l.example_name=e.example_name,l.code_desc=e.code_desc,l.example_desc=e.example_desc,t?(l.article_title_id=e.article_title_id,l.flag=t,r.PostMethod(c,l).then(function(e){n.successmessage=e,n.isClicked=!0,n.getArticles(),a.demoroute(),a.update()},function(e){console.log(e.statusText),o.err(e)})):(l.category_id=e.category_id,r.PostMethod(s,l).then(function(e){var t=e.PostArticleResult.split(",");n.successmessage=t[0],n.getArticles(),n.isClicked=!0},function(e){console.log(e.statusText),o.err(e)}))}}]);