app.controller("AddBlogCtrl",["$route","JsonDataService","myAppURLs","$filter","EncodeService","httpCall","$log",function(o,t,e,l,s,i,n){var r=this,a=t.GetJsonInfo(o.current.templateUrl);i.GetMethod(a).then(function(o){r.JsonVals=o},function(o){n.info(o)}),r.menu=[["bold","italic","underline","strikethrough","subscript","superscript"],["format-block"],["font"],["font-size"],["font-color","hilite-color"],["remove-format"],["ordered-list","unordered-list","outdent","indent"],["left-justify","center-justify","right-justify"],["code","quote","paragraph"],["css-class"]];var d=JSON.parse(s.encodelogval(sessionStorage.UserInfo));r.loaddata=function(){var o=new Object;o.user_id=d.UserId;var t=e.GetMyBlog;i.PostMethod(t,o).then(function(o){r.Blogs=o.GetMyBlogResult},function(o){n.info(o)})},r.loaddata(),r.successmessage="",r.sub_but=!0,r.cls_but=!0,r.update_but=!1,r.add_but=!1,r.edit_but=!1,r.del_but=!1,r.isClicked=!1,r.submit_blog=function(o){r.isClicked=!0;var t=new Object;t.UserId=d.UserId,t.blog_title=o.blog_title,t.alias_url=o.alias_url,t.blog_description=o.description;var l=e.PostBlog;i.PostMethod(l,t).then(function(o){var t=o.split(","),e=t[1];null!=e&&(r.blogpost.blog_id=e),r.successmessage=t[0],r.loaddata()},function(o){n.info(o)})},r.update_info=function(o){r.isClicked=!1,r.successmessage="",r.blogpost=[],r.add_but=!0,r.update_but=!0,r.del_but=!0,r.sub_but=!1,r.isClicked=!1,r.blogpost.blog_id=o.blog_id,r.blogpost.blog_title=o.blog_title,r.blogpost.alias_url=o.alias_url,r.blogpost.description=o.blog_description},r.update_blog=function(o,t){var l=new Object;l.UserId=d.UserId,l.blog_id=o.blog_id,l.blog_title=o.blog_title,l.alias_url=o.alias_url,l.blog_description=o.description,l.flag=t,r.isClicked=!0;var s=e.ModifyMyBlog;i.PostMethod(s,l).then(function(o){r.successmessage=o,r.loaddata()},function(o){n.info(o)})},r.copyTText=function(o){r.blogpost.alias_url=l("lowercase")(o).replace(/ +(?=)/g,"-")},r.reload=function(){r.blogpost.blog_id="",r.blogpost.blog_title="",r.blogpost.alias_url="",r.blogpost.description=""},r.open=function(o){r.BlogInfo=r.Blogs.filter(function(t){return t.blog_id==o}),r.BlogInfo=r.BlogInfo[0]}}]);