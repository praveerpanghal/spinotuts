app.controller("MenuControlCtrl",["$scope","$http","$localStorage","myAppURLs","$location","$rootScope","CatService","ArticlesService","JsonDataService","$route","MenuService","$filter","$timeout","LogService","httpCall",function(e,a,t,n,o,i,r,s,u,c,g,l,m,_,p){e.currentPageT=1,e.currentPageM=1,e.currentPageC=1,e.pageSize=6,e.pageChangeHandler=function(e){},e.tab=0,sessionStorage.successmessage&&(e.tab=1,delete sessionStorage.successmessage),e.userupdatemsg="",sessionStorage.userupdatemsg&&(e.tab=2,delete sessionStorage.userupdatemsg),e.tnavupdatemsg="",sessionStorage.tnavupdatemsg&&(e.tab=3,delete sessionStorage.tnavupdatemsg),e.mnavupdatemsg="",sessionStorage.mnavupdatemsg&&(e.tab=3,delete sessionStorage.mnavupdatemsg),e.cnavupdatemsg="",sessionStorage.cnavupdatemsg&&(e.tab=3,delete sessionStorage.cnavupdatemsg);var d=u.GetJsonInfo(c.current.templateUrl);if(p.GetMethod(d).then(function(a){e.JsonVals=a},function(e){$log.info(e)}),e.intab=11,e.changeinsideTab=function(a,t){if(localStorage.getItem("testObject"))var n=jQuery.parseJSON(localStorage.getItem("testObject"));var o=_.getmenuval();n&&(o.menu_name=n.menu_name,o.page_url=n.page_url,o.sequence_no=n.sequence_no,o.page_name=n.page_name,o.user_rights_id=n.user_rights_id,o.is_active=n.is_active,o.parent_menu_id=n.parent_menu_id,o.category_name=n.category_name,o.category_url=n.category_url),o.editing=!1,e.intab=a},e.isActiveinsideTab=function(a){return e.intab===a},sessionStorage.UserName){e.cLists=JSON.parse(localStorage.cList);var v=n.GetNavigationControl;g.GetNavigationControl(v).then(function(a){""!==a.GetNavigationControlResult?(e.menuNav=JSON.parse(a.GetNavigationControlResult),e.menuNavCtrls=e.menuNav[0]):$log.info(a)},function(e){$log.info(e)});var v=n.GetScreenRights;g.GetScreenRights(v).then(function(a){""!==a.GetScreenRightsResult?e.userRights=a.GetScreenRightsResult:$log.info(a)},function(e){$log.info(e)}),e.editItem=function(a){if(localStorage.getItem("testObject"))var t=jQuery.parseJSON(localStorage.getItem("testObject"));var n=_.getmenuval();t&&(n.menu_name=t.menu_name,n.page_url=t.page_url,n.sequence_no=t.sequence_no,n.page_name=t.page_name,n.lookup_value_id=t.lookup_value_id,n.user_rights_id=t.user_rights_id,n.is_active=t.is_active,n.parent_menu_id=t.parent_menu_id,n.category_name=t.category_name,n.category_url=t.category_url),localStorage.setItem("testObject",JSON.stringify(a)),n.editing=!1,_.memuupdate(a),a.editing=!0,e.myObj=angular.copy(a)},e.cancel=function(a){localStorage.removeItem("testObject"),a.editing=!1,a.menu_name=e.myObj.menu_name,a.page_url=e.myObj.page_url,a.sequence_no=e.myObj.sequence_no,a.page_name=e.myObj.page_name,a.lookup_value_id=e.myObj.lookup_value_id,a.user_rights_id=e.myObj.user_rights_id,a.is_active=e.myObj.is_active,a.parent_menu_id=e.myObj.parent_menu_id,a.category_name=e.myObj.category_name,a.category_url=e.myObj.category_url},e.copyTopNavText=function(a,t){e.page_url=l("lowercase")(a).replace(/ +(?=)/g,"-"),$("#tpu"+t).val(e.page_url),$("input").trigger("input")},e.updatetopnav=function(a){localStorage.removeItem("testObject"),a.editing=!1;var t=new Object;t.user_id=e.uinfo,t.menu_id=a.menu_id,t.menu_name=a.menu_name,t.page_url=a.page_url,t.sequence_no=a.sequence_no,t.page_name=a.page_name,t.lookup_value_id=a.lookup_value_id,t.user_rights_id=a.user_rights_id,t.is_active=a.is_active,t.controller=a.controller||"",console.log(t);var o=n.UpdateTopNavigation;g.UpdateTopNavigation(o,t).then(function(t){1==t?(e.tnavupdatemsg="navigation updated successfully",sessionStorage.tnavupdatemsg=e.tnavupdatemsg,m(function(){e.tnavupdatemsg=""},2e3)):t==-1?(a.editing=!0,e.errormsg="sequence number already exists , please try another !",m(function(){e.errormsg=""},2e3)):$log.info(t)},function(e){$log.info(e)})},e.copyMiddleNavText=function(a,t){e.page_url=l("lowercase")(a).replace(/ +(?=)/g,"-"),$("#mpu"+t).val(e.page_url),$("input").trigger("input")},e.updatemiddlenav=function(a){a.editing=!1;var t=new Object;t.user_id=e.uinfo,t.menu_id=a.menu_id,t.sequence_no=a.sequence_no,t.menu_name=a.menu_name,t.page_url=a.page_url,t.page_name=a.page_name,t.lookup_value_id=a.lookup_value_id,t.user_rights_id=a.user_rights_id,t.is_active=a.is_active,t.controller=a.controller||"";var o=n.UpdateTopNavigation;g.UpdateTopNavigation(o,t).then(function(t){1==t?(e.mnavupdatemsg="navigation updated successfully",sessionStorage.mnavupdatemsg=e.mnavupdatemsg,m(function(){e.mnavupdatemsg=""},2e3)):t==-1?(e.errormsg="sequence number already exists , please try another !",m(function(){e.errormsg=""},2e3),a.editing=!0):$log.info(t)},function(e){$log.info(e)})},e.copyChildNavText=function(a,t){e.cpage_url=l("lowercase")(a).replace(/ +(?=)/g,"-"),$("#cpu"+t).val(e.cpage_url),$("input").trigger("input")},e.updatechildnav=function(a){a.editing=!1;var t=new Object;t.user_id=e.uinfo,t.category_id=a.category_id,t.category_name=a.category_name,t.sequence_no=a.sequence_no,t.category_url=a.category_url,t.page_name=a.page_name||"",t.user_rights_id=a.user_rights_id,t.is_active=a.is_active,t.parent_menu_id=a.parent_menu_id,t.controller=a.controller||"";var o=n.UpdateChildNavigation;g.UpdateChildNavigation(o,t).then(function(t){1==t?(e.cnavupdatemsg="navigation updated successfully",sessionStorage.cnavupdatemsg=e.cnavupdatemsg,m(function(){e.cnavupdatemsg=""},2e3)):t==-1?(e.errormsg="sequence number already exists , please try another !",m(function(){e.errormsg=""},2e3),a.editing=!0):$log.info(t)},function(e){$log.info(e)})},e.ctopNav=[],e.copyTText=function(a){e.ctopNav.ctpage_url=l("lowercase")(a).replace(/ +(?=)/g,"-")},e.createtopnav=function(){var a=e.ctopNav;e.master={};var t=new Object;t.menu_name=a.ctmenu_name,t.page_url=a.ctpage_url,t.controller=a.ctctrlName||"",t.lookup_value_id=a.lookup_value_id,t.user_rights_id=a.ctuser_rights_id,t.page_name=a.ctpage_name||"",t.sequence_no=a.ctseqNo||"",t.header="1",t.user_id=e.uinfo;var o=n.CreateTopNavigation;g.CreateTopNavigation(o,t).then(function(a){1==a?(e.sucessmsg="Navigation Created successfully.",e.ctopNav=angular.copy(e.master),m(function(){e.sucessmsg=""},2e3)):a==-1?(e.existmsg="sequence number already exists , please try another !",m(function(){e.existmsg=""},2e3)):$log.info(a)},function(e){$log.info(e)})},e.cmiddleNav=[],e.copyMText=function(a){e.cmiddleNav.mpage_url=l("lowercase")(a).replace(/ +(?=)/g,"-")},e.createmiddlenav=function(){var a=e.cmiddleNav;e.master={};var t=new Object;t.menu_name=a.mmenu_name,t.sequence_no=a.mseqNo||"",t.page_url=a.mpage_url,t.lookup_value_id=a.lookup_value_id,t.user_rights_id=a.muser_rights_id,t.page_name=a.mpage_name||"",t.header="2",t.user_id=e.uinfo,t.controller=a.mctrlName||"";var o=n.CreateTopNavigation;g.CreateTopNavigation(o,t).then(function(a){1==a?(e.sucessmsg="Navigation Created successfully.",e.cmiddleNav=angular.copy(e.master),m(function(){e.sucessmsg=""},2e3)):a==-1?(e.existmsg="sequence number already exists , please try another !",m(function(){e.existmsg=""},2e3)):$log.info(a)},function(e){$log.info(e)})},e.cbtmNav=[],e.copyBText=function(a){e.cbtmNav.cbpage_url=l("lowercase")(a).replace(/ +(?=)/g,"-")},e.createbottomnav=function(){var a=e.cbtmNav;e.master={};var t=new Object;t.category_name=a.cbmenu_name,t.sequence_no=a.cbseqNo||"0",t.controller=a.cbctrlName||"",t.category_url=a.cbpage_url,t.page_name=a.cbpage_name||"",t.parent_menu_id=a.cbparent_menu_id,t.user_rights_id=a.cbuser_rights_id,t.user_id=e.uinfo;var o=n.CreateChildNavigation;g.CreateChildNavigation(o,t).then(function(a){1==a?(e.sucessmsg="Navigation Created successfully.",e.cbtmNav=angular.copy(e.master),m(function(){e.sucessmsg=""},2e3)):a==-1?(e.existmsg="sequence number already exists , please try another !",m(function(){e.existmsg=""},2e3)):$log.info(a)},function(e){$log.info(e)})},e.clearFlds=function(){e.master={},e.ctopNav=angular.copy(e.master),e.cmiddleNav=angular.copy(e.master),e.cbtmNav=angular.copy(e.master)};var v=n.GetParentNavigationList;g.GetParentNavigationList(v).then(function(a){""!==a.GetParentNavigationListResult?e.parentNavResult=a.GetParentNavigationListResult:$log.info(a)},function(e){$log.info(e)});var v=n.GetLookup,f={lookup_id:"1"};g.GetLookup(v,f).then(function(a){a?e.menuTypes=a:$log.info(a)})}else o.path("/Login")}]);