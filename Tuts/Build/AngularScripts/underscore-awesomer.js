(function(){return function(e){return"function"==typeof define&&define.amd?define("underscore-awesomer",["underscore"],e):e.call(this)}(function(){var e,r;if(e=this,this._||"undefined"==typeof require)r=this._;else try{r=require("lodash")}catch(n){r=require("underscore")}return r&&r.hasOwnProperty("_")&&(r=r._),"undefined"!=typeof e.exports&&(e.exports=r),r.AWESOMENESS="1.2.4",r.pluck=function(e,n,t){return t?r.map(e,function(e){var r;return r=e[n],delete e[n],r}):r.map(e,function(e){return e[n]})},r.remove=function(e,n,t){var i,o,u,c,s,f,l,a,p,h,E,y,d,O,v,C,_,A,g,N,P,S,k,R,b,D,m,M,T,I;if(null==t&&(t={}),r.isEmpty(e))return!n||r.isFunction(n)?[]:void 0;if(r.isFunction(t)&&(t={callback:t}),t.preclear)if(f=e,e=r.clone(e),r.isArray(f))f.length=0;else for(o in f)delete f[o];if(l=[],a=!1,r.isArray(e)){if(r.isUndefined(n))l=r.keys(e);else if(r.isFunction(n))t.first_only?(a=!0,r.find(e,function(e,r){return!!n(e)&&(l.push(r),!0)})):r.each(e,function(e,r){if(n(e))return l.push(r)});else if(r.isArray(n))if(t.first_only)for(a=!0,E=0,v=n.length;E<v;E++){c=n[E];for(i in e)if(p=e[i],c===p){l.push(i);break}}else for(y=0,C=n.length;y<C;y++){c=n[y];for(i in e)p=e[i],c===p&&l.push(i)}else if(t.first_only)a=!0,i=r.indexOf(e,n),i>=0&&l.push(i);else{a=!0;for(i in e)p=e[i],n===p&&l.push(i)}if(a){if(!l.length)return;for(p=e[l[0]],l=l.sort(function(e,n){return r.compare(n,e)}),d=0,_=l.length;d<_;d++)i=l[d],e.splice(i,1);if(t.callback)for(O=0,A=l.length;O<A;O++)i=l[O],t.callback(p);return p}if(!l.length)return[];for(h=[],l=l.sort(function(e,n){return r.compare(n,e)}),b=0,g=l.length;b<g;b++)i=l[b],h.unshift(e[i]),e.splice(i,1);if(t.callback)for(D=0,N=h.length;D<N;D++)p=h[D],t.callback(p);return r.uniq(h)}if(r.isUndefined(n))l=r.keys(e);else if(r.isFunction(n))for(o in e)p=e[o],n(p,o)&&l.push(o);else if(r.isArray(n))if(t.values)for(m=0,P=n.length;m<P;m++)if(c=n[m],t.first_only){for(o in e)if(p=e[o],c===p){l.push(o);break}}else for(o in e)p=e[o],c===p&&l.push(o);else for(s=n,M=0,S=n.length;M<S;M++)u=n[M],e.hasOwnProperty(u)&&l.push(u);else if(r.isString(n)&&!t.values)a=!0,s=[],e.hasOwnProperty(n)&&(s.push(n),l.push(n));else for(o in e)p=e[o],n===p&&l.push(o);if(s){if(!s.length)return a?void 0:[];for(h=[],T=0,k=l.length;T<k;T++)o=l[T],h.push(e[o]),delete e[o];if(t.callback)for(i in h)p=h[i],t.callback(p,s[i]);return a?h[0]:h}if(!l.length)return{};for(h={},I=0,R=l.length;I<R;I++)o=l[I],h[o]=e[o],delete e[o];if(t.callback)for(o in h)p=h[o],t.callback(p,o);return h},r.findIndex=function(e,r){var n,t;for(n in e)if(t=e[n],r(e[n]))return n;return-1},r.hasKeypath=r.keypathExists=function(e,n){return!!r.keypathValueOwner(e,n)},r.keypathValueOwner=function(e,n){var t,i,o,u,c;t=r.isString(n)?n.split("."):n,i=e,c=t.length;for(o in t){if(u=t[o],!(u in i))break;if(++o===c)return i;if(i=i[u],!(i&&i instanceof Object))break}},r.keypath=function(e,n,t){var i,o;if(i=r.isString(n)?n.split("."):n,o=r.keypathValueOwner(e,i),2===arguments.length){if(!o)return;return o[i[i.length-1]]}if(o)return o[i[i.length-1]]=t,t},r.cloneToDepth=r.containerClone=r.clone=function(e,n){var t,i;if(!e||"object"!=typeof e)return e;if(r.isArray(e))t=Array.prototype.slice.call(e);else{if(e.constructor!=={}.constructor)return e;t=r.extend({},e)}if(!r.isUndefined(n)&&n>0)for(i in t)t[i]=r.clone(t[i],n-1);return t},r.deepClone=function(e,n){var t,i;if(!e||"object"!=typeof e)return e;if(r.isString(e))return String.prototype.slice.call(e);if(r.isDate(e))return new Date(e.valueOf());if(r.isFunction(e.clone))return e.clone();if(r.isArray(e))t=Array.prototype.slice.call(e);else{if(e.constructor!=={}.constructor)return e;t=r.extend({},e)}if(!r.isUndefined(n)&&n>0)for(i in t)t[i]=r.deepClone(t[i],n-1);return t},r.isConstructor=function(e){return r.isFunction(e)&&e.name},r.resolveConstructor=function(n){var t,i;return t=r.isArray(n)?n:r.isString(n)?n.split("."):void 0,t?(i=1===t.length?e[t[0]]:r.keypath(e,t),i&&r.isConstructor(i)?i:void 0):r.isFunction(n)&&r.isConstructor(n)?n:void 0},r.CONVERT_NONE=0,r.CONVERT_IS_TYPE=1,r.CONVERT_TO_METHOD=2,r.conversionPath=function(e,n){var t,i,o,u;if(i=r.isArray(n)?n:r.isString(n)?n.split("."):void 0,u=typeof e,t=i?i[i.length-1]:void 0,u=typeof e,t=i?i[i.length-1]:void 0,i&&u===t)return r.CONVERT_IS_TYPE;if(o=r.resolveConstructor(i?i:n),o&&"object"===u)try{if(e instanceof o)return r.CONVERT_IS_TYPE}catch(c){}return t=o&&o.name?o.name:t,t?r["is"+t]&&r["is"+t](e)?r.CONVERT_IS_TYPE:"object"===u&&e["to"+t]?r.CONVERT_TO_METHOD:r.CONVERT_NONE:r.CONVERT_NONE},r.isConvertible=function(e,n){return r.conversionPath(e,n)>0},r.toType=function(e,n){var t,i;switch(t=r.isArray(n)?n:r.isString(n)?n.split("."):void 0,r.conversionPath(e,t?t:n)){case 1:return e;case 2:return t?e["to"+t[t.length-1]]():(i=r.resolveConstructor(n),i&&i.name?e["to"+i.name]():void 0)}},r.functionExists=function(e,n){return e instanceof Object&&e[n]&&r.isFunction(e[n])},r.callIfExists=function(e,n){return r.functionExists(e,n)?e[n].apply(e,Array.prototype.slice.call(arguments,2)):void 0},r.getSuperFunction=function(e,n){var t;return t=r.keypathValueOwner(e,["constructor","__super__",n]),t&&r.isFunction(t[n])?t[n]:void 0},r.superCall=function(e,n){var t;return t=r.getSuperFunction(e,n),t?t.apply(e,Array.prototype.slice.call(arguments,2)):void 0},r.superApply=function(e,n,t){var i;return i=r.getSuperFunction(e,n),i?i.apply(e,t):void 0},r.classOf=function(e){return null!=e&&Object.getPrototypeOf(Object(e)).constructor.name||void 0},r.copyProperties=function(e,n,t,i){var o,u,c,s,f;for(c=t||r.keys(n),o=!1,s=0,f=c.length;s<f;s++)u=c[s],hasOwnProperty.call(n,u)&&(e[u]=n[u],o=!0,i&&delete n[u]);return o},r.getValue=function(e,r,n,t){var i;return hasOwnProperty.call(e,r)?t?(i=e[r],delete e[r],i):e[r]:n},r.sortBy=function(e,n,t){return r.pluck(r.map(e,function(e,r,i){return{value:e,criteria:n.call(t,e,r,i)}}).sort(function(e,n){var t,i;return t=e.criteria,i=n.criteria,r.compare(t,i)}),"value")},r.sortedIndex=function(e,n,t){var i,o,u;for(t||(t=r.identity),o=0,i=e.length;o<i;)u=o+i>>1,r.compare(t(e[u]),t(n))===r.COMPARE_ASCENDING?o=u+1:i=u;return o},r.COMPARE_EQUAL=0,r.COMPARE_ASCENDING=-1,r.COMPARE_DESCENDING=1,r.compare=function(e,n,t){var i;return"object"!=typeof e?e===n?r.COMPARE_EQUAL:e<n?r.COMPARE_ASCENDING:r.COMPARE_DESCENDING:(t||(t="compare"),e[t]&&r.isFunction(e[t])?(i=e[t](n),0===i?r.COMPARE_EQUAL:i<0?r.COMPARE_ASCENDING:r.COMPARE_DESCENDING):n[t]&&r.isFunction(n[t])?(i=n[t](e),0===i?r.COMPARE_EQUAL:i<0?r.COMPARE_DESCENDING:r.COMPARE_ASCENDING):e===n?r.COMPARE_EQUAL:e<n?r.COMPARE_ASCENDING:r.COMPARE_DESCENDING)},r})}).call(this);