(function(){return function(e){return"function"==typeof define&&define.amd?define("underscore-awesomer",["underscore"],e):e.call(this)}(function(){var e,n;if(e=this,this._||"undefined"==typeof require)n=this._;else try{n=require("lodash")}catch(r){n=require("underscore")}return n&&n.hasOwnProperty("_")&&(n=n._),"undefined"!=typeof e.exports&&(e.exports=n),n.AWESOMENESS="1.2.4",n.pluck=function(e,r,t){return t?n.map(e,function(e){var n;return n=e[r],delete e[r],n}):n.map(e,function(e){return e[r]})},n.remove=function(e,r,t){var i,o,u,c,s,f,l,a,p,h,E,y,d,O,v,C,_,A,g,N,P,S,k,R,b,D,m,M,T,I;if(null==t&&(t={}),n.isEmpty(e))return!r||n.isFunction(r)?[]:void 0;if(n.isFunction(t)&&(t={callback:t}),t.preclear)if(f=e,e=n.clone(e),n.isArray(f))f.length=0;else for(o in f)delete f[o];if(l=[],a=!1,n.isArray(e)){if(n.isUndefined(r))l=n.keys(e);else if(n.isFunction(r))t.first_only?(a=!0,n.find(e,function(e,n){return!!r(e)&&(l.push(n),!0)})):n.each(e,function(e,n){if(r(e))return l.push(n)});else if(n.isArray(r))if(t.first_only)for(a=!0,E=0,v=r.length;E<v;E++){c=r[E];for(i in e)if(p=e[i],c===p){l.push(i);break}}else for(y=0,C=r.length;y<C;y++){c=r[y];for(i in e)p=e[i],c===p&&l.push(i)}else if(t.first_only)a=!0,i=n.indexOf(e,r),i>=0&&l.push(i);else{a=!0;for(i in e)p=e[i],r===p&&l.push(i)}if(a){if(!l.length)return;for(p=e[l[0]],l=l.sort(function(e,r){return n.compare(r,e)}),d=0,_=l.length;d<_;d++)i=l[d],e.splice(i,1);if(t.callback)for(O=0,A=l.length;O<A;O++)i=l[O],t.callback(p);return p}if(!l.length)return[];for(h=[],l=l.sort(function(e,r){return n.compare(r,e)}),b=0,g=l.length;b<g;b++)i=l[b],h.unshift(e[i]),e.splice(i,1);if(t.callback)for(D=0,N=h.length;D<N;D++)p=h[D],t.callback(p);return n.uniq(h)}if(n.isUndefined(r))l=n.keys(e);else if(n.isFunction(r))for(o in e)p=e[o],r(p,o)&&l.push(o);else if(n.isArray(r))if(t.values)for(m=0,P=r.length;m<P;m++)if(c=r[m],t.first_only){for(o in e)if(p=e[o],c===p){l.push(o);break}}else for(o in e)p=e[o],c===p&&l.push(o);else for(s=r,M=0,S=r.length;M<S;M++)u=r[M],e.hasOwnProperty(u)&&l.push(u);else if(n.isString(r)&&!t.values)a=!0,s=[],e.hasOwnProperty(r)&&(s.push(r),l.push(r));else for(o in e)p=e[o],r===p&&l.push(o);if(s){if(!s.length)return a?void 0:[];for(h=[],T=0,k=l.length;T<k;T++)o=l[T],h.push(e[o]),delete e[o];if(t.callback)for(i in h)p=h[i],t.callback(p,s[i]);return a?h[0]:h}if(!l.length)return{};for(h={},I=0,R=l.length;I<R;I++)o=l[I],h[o]=e[o],delete e[o];if(t.callback)for(o in h)p=h[o],t.callback(p,o);return h},n.findIndex=function(e,n){var r,t;for(r in e)if(t=e[r],n(e[r]))return r;return-1},n.hasKeypath=n.keypathExists=function(e,r){return!!n.keypathValueOwner(e,r)},n.keypathValueOwner=function(e,r){var t,i,o,u,c;t=n.isString(r)?r.split("."):r,i=e,c=t.length;for(o in t){if(u=t[o],!(u in i))break;if(++o===c)return i;if(i=i[u],!(i&&i instanceof Object))break}},n.keypath=function(e,r,t){var i,o;return i=n.isString(r)?r.split("."):r,o=n.keypathValueOwner(e,i),2===arguments.length?o?o[i[i.length-1]]:void 0:o?(o[i[i.length-1]]=t,t):void 0},n.cloneToDepth=n.containerClone=n.clone=function(e,r){var t,i;if(!e||"object"!=typeof e)return e;if(n.isArray(e))t=Array.prototype.slice.call(e);else{if(e.constructor!=={}.constructor)return e;t=n.extend({},e)}if(!n.isUndefined(r)&&r>0)for(i in t)t[i]=n.clone(t[i],r-1);return t},n.deepClone=function(e,r){var t,i;if(!e||"object"!=typeof e)return e;if(n.isString(e))return String.prototype.slice.call(e);if(n.isDate(e))return new Date(e.valueOf());if(n.isFunction(e.clone))return e.clone();if(n.isArray(e))t=Array.prototype.slice.call(e);else{if(e.constructor!=={}.constructor)return e;t=n.extend({},e)}if(!n.isUndefined(r)&&r>0)for(i in t)t[i]=n.deepClone(t[i],r-1);return t},n.isConstructor=function(e){return n.isFunction(e)&&e.name},n.resolveConstructor=function(r){var t,i;return t=n.isArray(r)?r:n.isString(r)?r.split("."):void 0,t?(i=1===t.length?e[t[0]]:n.keypath(e,t),i&&n.isConstructor(i)?i:void 0):n.isFunction(r)&&n.isConstructor(r)?r:void 0},n.CONVERT_NONE=0,n.CONVERT_IS_TYPE=1,n.CONVERT_TO_METHOD=2,n.conversionPath=function(e,r){var t,i,o,u;if(i=n.isArray(r)?r:n.isString(r)?r.split("."):void 0,u=typeof e,t=i?i[i.length-1]:void 0,u=typeof e,t=i?i[i.length-1]:void 0,i&&u===t)return n.CONVERT_IS_TYPE;if(o=n.resolveConstructor(i?i:r),o&&"object"===u)try{if(e instanceof o)return n.CONVERT_IS_TYPE}catch(c){}return t=o&&o.name?o.name:t,t?n["is"+t]&&n["is"+t](e)?n.CONVERT_IS_TYPE:"object"===u&&e["to"+t]?n.CONVERT_TO_METHOD:n.CONVERT_NONE:n.CONVERT_NONE},n.isConvertible=function(e,r){return n.conversionPath(e,r)>0},n.toType=function(e,r){var t,i;switch(t=n.isArray(r)?r:n.isString(r)?r.split("."):void 0,n.conversionPath(e,t?t:r)){case 1:return e;case 2:return t?e["to"+t[t.length-1]]():(i=n.resolveConstructor(r),i&&i.name?e["to"+i.name]():void 0)}},n.functionExists=function(e,r){return e instanceof Object&&e[r]&&n.isFunction(e[r])},n.callIfExists=function(e,r){return n.functionExists(e,r)?e[r].apply(e,Array.prototype.slice.call(arguments,2)):void 0},n.getSuperFunction=function(e,r){var t;return t=n.keypathValueOwner(e,["constructor","__super__",r]),t&&n.isFunction(t[r])?t[r]:void 0},n.superCall=function(e,r){var t;return t=n.getSuperFunction(e,r),t?t.apply(e,Array.prototype.slice.call(arguments,2)):void 0},n.superApply=function(e,r,t){var i;return i=n.getSuperFunction(e,r),i?i.apply(e,t):void 0},n.classOf=function(e){return null!=e&&Object.getPrototypeOf(Object(e)).constructor.name||void 0},n.copyProperties=function(e,r,t,i){var o,u,c,s,f;for(c=t||n.keys(r),o=!1,s=0,f=c.length;s<f;s++)u=c[s],hasOwnProperty.call(r,u)&&(e[u]=r[u],o=!0,i&&delete r[u]);return o},n.getValue=function(e,n,r,t){var i;return hasOwnProperty.call(e,n)?t?(i=e[n],delete e[n],i):e[n]:r},n.sortBy=function(e,r,t){return n.pluck(n.map(e,function(e,n,i){return{value:e,criteria:r.call(t,e,n,i)}}).sort(function(e,r){var t,i;return t=e.criteria,i=r.criteria,n.compare(t,i)}),"value")},n.sortedIndex=function(e,r,t){var i,o,u;for(t||(t=n.identity),o=0,i=e.length;o<i;)u=o+i>>1,n.compare(t(e[u]),t(r))===n.COMPARE_ASCENDING?o=u+1:i=u;return o},n.COMPARE_EQUAL=0,n.COMPARE_ASCENDING=-1,n.COMPARE_DESCENDING=1,n.compare=function(e,r,t){var i;return"object"!=typeof e?e===r?n.COMPARE_EQUAL:e<r?n.COMPARE_ASCENDING:n.COMPARE_DESCENDING:(t||(t="compare"),e[t]&&n.isFunction(e[t])?(i=e[t](r),0===i?n.COMPARE_EQUAL:i<0?n.COMPARE_ASCENDING:n.COMPARE_DESCENDING):r[t]&&n.isFunction(r[t])?(i=r[t](e),0===i?n.COMPARE_EQUAL:i<0?n.COMPARE_DESCENDING:n.COMPARE_ASCENDING):e===r?n.COMPARE_EQUAL:e<r?n.COMPARE_ASCENDING:n.COMPARE_DESCENDING)},n})}).call(this);